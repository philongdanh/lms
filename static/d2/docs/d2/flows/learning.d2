# Learning Flow Diagrams
# D2 Documentation: https://d2lang.com

# Learning Path Flow
learning_path: Learning Path Flow {
  direction: right
  
  start: Start {shape: oval}
  select_subject: Select Subject
  load_topics: Load Topics by Grade
  select_topic: Select Topic
  
  check_unlock: Topic Unlocked? {shape: diamond}
  
  show_lessons: Show Lessons
  select_lesson: Select Lesson
  
  completed: Already Completed? {shape: diamond}
  
  view_content: View Content
  complete: Mark Complete
  
  has_exercise: Has Exercise? {shape: diamond}
  
  do_exercise: Do Exercise
  award_points: Award Points
  update_progress: Update Progress
  
  more: More Lessons? {shape: diamond}
  
  done: End {shape: oval}
  locked_msg: Show Locked Message
  review: Review Mode
  
  start -> select_subject -> load_topics -> select_topic -> check_unlock
  check_unlock -> show_lessons: Yes
  check_unlock -> locked_msg: No
  locked_msg -> select_topic
  
  show_lessons -> select_lesson -> completed
  completed -> view_content: No
  completed -> review: Yes
  review -> show_lessons
  
  view_content -> complete -> has_exercise
  has_exercise -> do_exercise: Yes
  has_exercise -> award_points: No
  
  do_exercise -> award_points -> update_progress -> more
  more -> show_lessons: Yes
  more -> done: No
}

# Exercise Flow
exercise: Exercise Flow {
  direction: right
  
  start: Start {shape: oval}
  load: Load Questions
  show: Show Question
  answer: Select Answer
  next: Next Question
  
  more: More Questions? {shape: diamond}
  
  submit: Submit Answers
  grade: Grade Answers
  show_result: Show Results
  
  pass: Score >= 70%? {shape: diamond}
  
  award: Award Points
  update: Update Progress
  retry: Offer Retry
  
  max_retry: Max Retries? {shape: diamond}
  
  done: End {shape: oval}
  fail: Mark as Failed
  
  start -> load -> show -> answer -> next -> more
  more -> show: Yes
  more -> submit: No
  
  submit -> grade -> show_result -> pass
  pass -> award: Yes
  pass -> retry: No
  
  award -> update -> done
  
  retry -> max_retry
  max_retry -> load: No
  max_retry -> fail: Yes
  fail -> done
}

# Progress Tracking
progress: Progress Tracking {
  direction: down
  
  user: User {
    points: Points
    level: Level
    streak: Streak
  }
  
  actions: Actions {
    complete_lesson: Complete Lesson (+10 pts)
    pass_quiz: Pass Quiz (+20 pts)
    daily_login: Daily Login (+5 pts)
    streak_bonus: Streak Bonus (+50 pts)
  }
  
  rewards: Rewards {
    level_up: Level Up
    badge: Earn Badge
    unlock: Unlock Content
  }
  
  user -> actions: performs
  actions -> rewards: triggers
  rewards -> user: updates
}
